{"id":"e9964670-e478-40fd-bdf0-e7a212021371","revision":0,"last_node_id":39,"last_link_id":119,"nodes":[{"id":17,"type":"BasicScheduler","pos":[480,1008],"size":[315,106],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"模型","name":"model","type":"MODEL","link":55},{"localized_name":"调度器","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"步数","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"降噪","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"Sigmas","name":"SIGMAS","type":"SIGMAS","links":[20]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"BasicScheduler","widget_ue_connectable":{}},"widgets_values":["simple",20,1]},{"id":16,"type":"KSamplerSelect","pos":[480,912],"size":[315,58],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"采样器名称","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null}],"outputs":[{"localized_name":"采样器","name":"SAMPLER","type":"SAMPLER","links":[19]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"KSamplerSelect","widget_ue_connectable":{}},"widgets_values":["euler"]},{"id":22,"type":"BasicGuider","pos":[576,48],"size":[222.3482666015625,46],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"模型","name":"model","type":"MODEL","link":54},{"localized_name":"条件","name":"conditioning","type":"CONDITIONING","link":42}],"outputs":[{"localized_name":"引导器","name":"GUIDER","type":"GUIDER","slot_index":0,"links":[30]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"BasicGuider","widget_ue_connectable":{}},"widgets_values":[]},{"id":13,"type":"SamplerCustomAdvanced","pos":[864,192],"size":[272.3617858886719,124.53733825683594],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"噪波","name":"noise","type":"NOISE","link":37},{"localized_name":"引导器","name":"guider","type":"GUIDER","link":30},{"localized_name":"采样器","name":"sampler","type":"SAMPLER","link":19},{"localized_name":"西格玛","name":"sigmas","type":"SIGMAS","link":20},{"localized_name":"Latent图像","name":"latent_image","type":"LATENT","link":116}],"outputs":[{"localized_name":"Latent","name":"output","type":"LATENT","slot_index":0,"links":[24]},{"localized_name":"降噪Latent","name":"denoised_output","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"SamplerCustomAdvanced","widget_ue_connectable":{}},"widgets_values":[]},{"id":8,"type":"VAEDecode","pos":[866,367],"size":[210,46],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"Latent","name":"samples","type":"LATENT","link":24},{"localized_name":"vae","name":"vae","type":"VAE","link":12}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[9]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"VAEDecode","widget_ue_connectable":{}},"widgets_values":[]},{"id":37,"type":"Note","pos":[480,1344],"size":[314.99755859375,117.98363494873047],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[],"properties":{"text":"","widget_ue_connectable":{}},"widgets_values":["The reference sampling implementation auto adjusts the shift value based on the resolution, if you don't want this you can just bypass (CTRL-B) this ModelSamplingFlux node.\n"],"color":"#432","bgcolor":"#653"},{"id":26,"type":"FluxGuidance","pos":[480,144],"size":[317.4000244140625,58],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"条件","name":"conditioning","type":"CONDITIONING","link":41},{"localized_name":"引导","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"localized_name":"条件","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[42]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"FluxGuidance","widget_ue_connectable":{}},"widgets_values":[3.5],"color":"#233","bgcolor":"#355"},{"id":10,"type":"VAELoader","pos":[48,432],"size":[311.81634521484375,60.429901123046875],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"vae名称","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[12]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"VAELoader","widget_ue_connectable":{}},"widgets_values":["ae.safetensors"]},{"id":28,"type":"Note","pos":[-461.409912109375,251.71971130371094],"size":[336,288],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[],"properties":{"text":"","widget_ue_connectable":{}},"widgets_values":["If you get an error in any of the nodes above make sure the files are in the correct directories.\n\nSee the top of the examples page for the links : https://comfyanonymous.github.io/ComfyUI_examples/flux/\n\nflux1-dev.safetensors goes in: ComfyUI/models/unet/\n\nt5xxl_fp16.safetensors and clip_l.safetensors go in: ComfyUI/models/clip/\n\nae.safetensors goes in: ComfyUI/models/vae/\n\n\nTip: You can set the weight_dtype above to one of the fp8 types if you have memory issues."],"color":"#432","bgcolor":"#653"},{"id":34,"type":"PrimitiveNode","pos":[432,480],"size":[210,82],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","widget":{"name":"width"},"slot_index":0,"links":[112,115]}],"title":"width","properties":{"Run widget replace on values":false,"widget_ue_connectable":{}},"widgets_values":[800,"fixed"],"color":"#323","bgcolor":"#535"},{"id":11,"type":"DualCLIPLoader","pos":[81,555],"size":[315,130],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"CLIP名称1","name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"link":null},{"localized_name":"CLIP名称2","name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"link":null},{"localized_name":"类型","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"设备","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[10]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"DualCLIPLoader","widget_ue_connectable":{}},"widgets_values":["t5xxl_fp8_e4m3fn.safetensors","clip_l.safetensors","flux","default"]},{"id":38,"type":"ApplyFBCacheOnModel","pos":[87.03001403808594,780.8997802734375],"size":[315,154],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":117},{"localized_name":"object_to_patch","name":"object_to_patch","type":"STRING","widget":{"name":"object_to_patch"},"link":null},{"localized_name":"residual_diff_threshold","name":"residual_diff_threshold","type":"FLOAT","widget":{"name":"residual_diff_threshold"},"link":null},{"localized_name":"start","name":"start","type":"FLOAT","widget":{"name":"start"},"link":null},{"localized_name":"end","name":"end","type":"FLOAT","widget":{"name":"end"},"link":null},{"localized_name":"max_consecutive_cache_hits","name":"max_consecutive_cache_hits","type":"INT","widget":{"name":"max_consecutive_cache_hits"},"link":null}],"outputs":[{"localized_name":"模型","name":"MODEL","type":"MODEL","slot_index":0,"links":[118]}],"properties":{"cnr_id":"wavespeed","ver":"16ec6f344f8cecbbf006d374043f85af22b7a51d","Node name for S&R":"ApplyFBCacheOnModel","widget_ue_connectable":{}},"widgets_values":["diffusion_model",0.12000000000000002,0,1,-1]},{"id":25,"type":"RandomNoise","pos":[480,768],"size":[315,82],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"噪波随机种","name":"noise_seed","type":"INT","widget":{"name":"noise_seed"},"link":null}],"outputs":[{"localized_name":"噪波","name":"NOISE","type":"NOISE","links":[37]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"RandomNoise","widget_ue_connectable":{}},"widgets_values":[1012442807156151,"randomize"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":35,"type":"PrimitiveNode","pos":[672,480],"size":[210,82],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","widget":{"name":"height"},"slot_index":0,"links":[113,114]}],"title":"height","properties":{"Run widget replace on values":false,"widget_ue_connectable":{}},"widgets_values":[1200,"fixed"],"color":"#323","bgcolor":"#535"},{"id":12,"type":"UNETLoader","pos":[33.48005294799805,274.6800537109375],"size":[315,82],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"UNet名称","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"数据类型","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"模型","name":"MODEL","type":"MODEL","slot_index":0,"links":[117]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"UNETLoader","widget_ue_connectable":{}},"widgets_values":["lyhAnimeFlux_v4Niji.safetensors","fp8_e4m3fn"],"color":"#223","bgcolor":"#335"},{"id":39,"type":"EnhancedCompileModel","pos":[32.329994201660156,1003.3797607421875],"size":[400,320],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"*","link":118},{"localized_name":"is_patcher","name":"is_patcher","type":"BOOLEAN","widget":{"name":"is_patcher"},"link":null},{"localized_name":"object_to_patch","name":"object_to_patch","type":"STRING","widget":{"name":"object_to_patch"},"link":null},{"localized_name":"compiler","name":"compiler","type":"STRING","widget":{"name":"compiler"},"link":null},{"localized_name":"fullgraph","name":"fullgraph","type":"BOOLEAN","widget":{"name":"fullgraph"},"link":null},{"localized_name":"dynamic","name":"dynamic","type":"BOOLEAN","widget":{"name":"dynamic"},"link":null},{"localized_name":"mode","name":"mode","type":"STRING","widget":{"name":"mode"},"link":null},{"localized_name":"options","name":"options","type":"STRING","widget":{"name":"options"},"link":null},{"localized_name":"disable","name":"disable","type":"BOOLEAN","widget":{"name":"disable"},"link":null},{"localized_name":"backend","name":"backend","type":"STRING","widget":{"name":"backend"},"link":null}],"outputs":[{"localized_name":"*","name":"*","type":"*","slot_index":0,"links":[119]}],"properties":{"cnr_id":"wavespeed","ver":"16ec6f344f8cecbbf006d374043f85af22b7a51d","Node name for S&R":"EnhancedCompileModel","widget_ue_connectable":{}},"widgets_values":[true,"diffusion_model","torch.compile",false,false,"","",false,"inductor",[false,true],[false,true]]},{"id":30,"type":"ModelSamplingFlux","pos":[483.02777099609375,1159.70703125],"size":[315,130],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"模型","name":"model","type":"MODEL","link":119},{"localized_name":"最大移位","name":"max_shift","type":"FLOAT","widget":{"name":"max_shift"},"link":null},{"localized_name":"基础移位","name":"base_shift","type":"FLOAT","widget":{"name":"base_shift"},"link":null},{"localized_name":"宽度","name":"width","type":"INT","widget":{"name":"width"},"link":115},{"localized_name":"高度","name":"height","type":"INT","widget":{"name":"height"},"link":114}],"outputs":[{"localized_name":"模型","name":"MODEL","type":"MODEL","slot_index":0,"links":[54,55]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"ModelSamplingFlux","widget_ue_connectable":{"width":true,"height":true}},"widgets_values":[1.15,0.5,800,1200]},{"id":9,"type":"SaveImage","pos":[894.8493041992188,483.9798889160156],"size":[574.3527221679688,855.9822387695312],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"图片","name":"images","type":"IMAGE","link":9},{"localized_name":"文件名前缀","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"SaveImage","widget_ue_connectable":{}},"widgets_values":["cat"]},{"id":27,"type":"EmptySD3LatentImage","pos":[480,624],"size":[315,106],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"宽度","name":"width","type":"INT","widget":{"name":"width"},"link":112},{"localized_name":"高度","name":"height","type":"INT","widget":{"name":"height"},"link":113},{"localized_name":"批量大小","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"Latent","name":"LATENT","type":"LATENT","slot_index":0,"links":[116]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"EmptySD3LatentImage","widget_ue_connectable":{"width":true,"height":true}},"widgets_values":[800,1200,2]},{"id":6,"type":"CLIPTextEncode","pos":[388.0334777832031,244.033203125],"size":[422.84503173828125,164.31304931640625],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":10},{"localized_name":"文本","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"条件","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[41]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"CLIPTextEncode","widget_ue_connectable":{}},"widgets_values":["Character Overview\nA cute white cartoon kitten stands upright in a friendly pose, facing the viewer on a city street. Its full body is visible as it waves cheerfully toward the camera, captured in a colorful animated style.\n\nFace Features\nThe kitten has a rounded, soft face with large, expressive blue eyes that shine with friendliness. Its small pink nose, gentle smile, and subtle blush marks on the cheeks give it a warm and welcoming expression. Thin white whiskers extend slightly from both sides of its face.\n\nHairstyle\nAs a cartoon kitten, it has smooth, short white fur covering its head, with a small tuft slightly sticking up between its ears, adding a playful touch to its design.\n\nClothing\nThe kitten wears a light blue hoodie with a front pocket and short sleeves, paired with dark denim shorts. The outfit is casual and youthful, matching the animated and friendly tone of the character.\n\nBody Features\nThe character is petite and childlike in proportion, with a chubby torso, short limbs, and small white paws. The tail curves gently behind it and is visible from the back. The body is softly rounded, enhancing the cute aesthetic.\n\nPose\nThe kitten stands upright on both legs, directly facing the viewer. Its left arm is slightly bent and lifted, with the paw open in a waving gesture. The overall stance is balanced and cheerful, with a slight tilt of the head conveying playfulness.",[false,true]],"color":"#232","bgcolor":"#353"}],"links":[[9,8,0,9,0,"IMAGE"],[10,11,0,6,0,"CLIP"],[12,10,0,8,1,"VAE"],[19,16,0,13,2,"SAMPLER"],[20,17,0,13,3,"SIGMAS"],[24,13,0,8,0,"LATENT"],[30,22,0,13,1,"GUIDER"],[37,25,0,13,0,"NOISE"],[41,6,0,26,0,"CONDITIONING"],[42,26,0,22,1,"CONDITIONING"],[54,30,0,22,0,"MODEL"],[55,30,0,17,0,"MODEL"],[112,34,0,27,0,"INT"],[113,35,0,27,1,"INT"],[114,35,0,30,4,"INT"],[115,34,0,30,3,"INT"],[116,27,0,13,4,"LATENT"],[117,12,0,38,0,"MODEL"],[118,38,0,39,0,"*"],[119,39,0,30,0,"MODEL"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.9090909090909091,"offset":[518.8287618826789,244.8843290210717]},"groupNodes":{},"node_versions":{"comfy-core":"v0.3.10-44-g2ff3104f","Comfy-WaveSpeed":"21140cdf8c43946acd9ea522b4fda66df5d859c9"},"VHS_latentpreview":false,"VHS_latentpreviewrate":0,"ue_links":[],"links_added_by_ue":[]},"version":0.4}