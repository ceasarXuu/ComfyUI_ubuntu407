{"id":"a916d3dd-7085-463e-8eac-e2b3bb8c5469","revision":0,"last_node_id":60,"last_link_id":149,"nodes":[{"id":11,"type":"DualCLIPLoader","pos":[48,288],"size":[315,122],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"label":"CLIP","localized_name":"CLIP","name":"CLIP","shape":3,"type":"CLIP","slot_index":0,"links":[10]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.23","Node name for S&R":"DualCLIPLoader"},"widgets_values":["t5xxl_fp16.safetensors","clip_l.safetensors","flux","default"]},{"id":17,"type":"BasicScheduler","pos":[480,1008],"size":[315,106],"flags":{},"order":20,"mode":0,"inputs":[{"label":"model","localized_name":"模型","name":"model","type":"MODEL","link":55}],"outputs":[{"label":"SIGMAS","localized_name":"Sigmas","name":"SIGMAS","shape":3,"type":"SIGMAS","links":[20]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.23","Node name for S&R":"BasicScheduler"},"widgets_values":["simple",20,1]},{"id":16,"type":"KSamplerSelect","pos":[480,912],"size":[315,58],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[{"label":"SAMPLER","localized_name":"采样器","name":"SAMPLER","shape":3,"type":"SAMPLER","links":[19]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.23","Node name for S&R":"KSamplerSelect"},"widgets_values":["euler"]},{"id":13,"type":"SamplerCustomAdvanced","pos":[864,192],"size":[272.3617858886719,124.53733825683594],"flags":{},"order":24,"mode":0,"inputs":[{"label":"noise","localized_name":"噪波","name":"noise","type":"NOISE","link":37},{"label":"guider","localized_name":"引导器","name":"guider","type":"GUIDER","link":30},{"label":"sampler","localized_name":"采样器","name":"sampler","type":"SAMPLER","link":19},{"label":"sigmas","localized_name":"西格玛","name":"sigmas","type":"SIGMAS","link":20},{"label":"latent_image","localized_name":"Latent图像","name":"latent_image","type":"LATENT","link":116}],"outputs":[{"label":"output","localized_name":"Latent","name":"output","shape":3,"type":"LATENT","slot_index":0,"links":[24]},{"label":"denoised_output","localized_name":"降噪Latent","name":"denoised_output","shape":3,"type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.23","Node name for S&R":"SamplerCustomAdvanced"},"widgets_values":[]},{"id":25,"type":"RandomNoise","pos":[480,768],"size":[315,82],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"label":"NOISE","localized_name":"噪波","name":"NOISE","shape":3,"type":"NOISE","links":[37]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.23","Node name for S&R":"RandomNoise"},"widgets_values":[930411576801601,"randomize"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":8,"type":"VAEDecode","pos":[866,367],"size":[210,46],"flags":{},"order":25,"mode":0,"inputs":[{"label":"samples","localized_name":"Latent","name":"samples","type":"LATENT","link":24},{"label":"vae","localized_name":"vae","name":"vae","type":"VAE","link":12}],"outputs":[{"label":"IMAGE","localized_name":"图像","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[145]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.23","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":30,"type":"ModelSamplingFlux","pos":[480,1152],"size":[315,170],"flags":{},"order":17,"mode":0,"inputs":[{"label":"model","localized_name":"模型","name":"model","type":"MODEL","link":56},{"label":"width","name":"width","type":"INT","widget":{"name":"width"},"link":127},{"label":"height","name":"height","type":"INT","widget":{"name":"height"},"link":128}],"outputs":[{"label":"MODEL","localized_name":"模型","name":"MODEL","shape":3,"type":"MODEL","slot_index":0,"links":[54,55]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.23","Node name for S&R":"ModelSamplingFlux"},"widgets_values":[1.15,0.5,1024,1024]},{"id":27,"type":"EmptySD3LatentImage","pos":[480,624],"size":[315,126],"flags":{},"order":16,"mode":0,"inputs":[{"label":"width","name":"width","type":"INT","widget":{"name":"width"},"link":125},{"label":"height","name":"height","type":"INT","widget":{"name":"height"},"link":126}],"outputs":[{"label":"LATENT","localized_name":"Latent","name":"LATENT","shape":3,"type":"LATENT","slot_index":0,"links":[116]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.23","Node name for S&R":"EmptySD3LatentImage"},"widgets_values":[1024,1024,1]},{"id":12,"type":"UNETLoader","pos":[48,144],"size":[315,82],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"label":"MODEL","localized_name":"模型","name":"MODEL","shape":3,"type":"MODEL","slot_index":0,"links":[56]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.23","Node name for S&R":"UNETLoader"},"widgets_values":["flux1-dev.safetensors","default"],"color":"#223","bgcolor":"#335"},{"id":37,"type":"Note","pos":[480,1344],"size":[314.99755859375,117.98363494873047],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["The reference sampling implementation auto adjusts the shift value based on the resolution, if you don't want this you can just bypass (CTRL-B) this ModelSamplingFlux node.\n"],"color":"#432","bgcolor":"#653"},{"id":10,"type":"VAELoader","pos":[48,432],"size":[311.81634521484375,60.429901123046875],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[{"label":"VAE","localized_name":"VAE","name":"VAE","shape":3,"type":"VAE","slot_index":0,"links":[12]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.23","Node name for S&R":"VAELoader"},"widgets_values":["ae.safetensors"]},{"id":22,"type":"BasicGuider","pos":[960,66],"size":[222.3482666015625,46],"flags":{},"order":23,"mode":0,"inputs":[{"label":"model","localized_name":"模型","name":"model","type":"MODEL","link":54},{"label":"conditioning","localized_name":"条件","name":"conditioning","type":"CONDITIONING","link":123}],"outputs":[{"label":"GUIDER","localized_name":"引导器","name":"GUIDER","shape":3,"type":"GUIDER","slot_index":0,"links":[30]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.23","Node name for S&R":"BasicGuider"},"widgets_values":[]},{"id":43,"type":"Note","pos":[1130,-440],"size":[345.9017028808594,182.3145294189453],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["The redux model lets you prompt with images. It can be used with any Flux1 dev or schnell model workflow.\n\nYou can chain multiple \"Apply Style Model\" nodes if you want to mix multiple images together."],"color":"#432","bgcolor":"#653"},{"id":38,"type":"CLIPVisionLoader","pos":[60,-410],"size":[370,60],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[{"label":"CLIP_VISION","localized_name":"CLIP视觉","name":"CLIP_VISION","type":"CLIP_VISION","slot_index":0,"links":[117]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.23","Node name for S&R":"CLIPVisionLoader"},"widgets_values":["sigclip_vision_patch14_384.safetensors"]},{"id":6,"type":"CLIPTextEncode","pos":[392.17425537109375,300.51409912109375],"size":[410.3830261230469,78],"flags":{},"order":18,"mode":0,"inputs":[{"label":"clip","localized_name":"clip","name":"clip","type":"CLIP","link":10},{"label":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":131}],"outputs":[{"label":"CONDITIONING","localized_name":"条件","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[41]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.23","Node name for S&R":"CLIPTextEncode"},"widgets_values":["Cute naked girl, nipples, big breast"],"color":"#232","bgcolor":"#353"},{"id":44,"type":"GetImageSize+","pos":[-231.04147338867188,171.03387451171875],"size":[214.20001220703125,66],"flags":{},"order":14,"mode":0,"inputs":[{"label":"image","localized_name":"image","name":"image","type":"IMAGE","link":147}],"outputs":[{"label":"width","localized_name":"width","name":"width","type":"INT","slot_index":0,"links":[125,127]},{"label":"height","localized_name":"height","name":"height","type":"INT","slot_index":1,"links":[126,128]},{"label":"count","localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","Node name for S&R":"GetImageSize+"},"widgets_values":[]},{"id":26,"type":"FluxGuidance","pos":[480,144],"size":[317.4000244140625,58],"flags":{},"order":21,"mode":0,"inputs":[{"label":"conditioning","localized_name":"条件","name":"conditioning","type":"CONDITIONING","link":41}],"outputs":[{"label":"CONDITIONING","localized_name":"条件","name":"CONDITIONING","shape":3,"type":"CONDITIONING","slot_index":0,"links":[122]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.23","Node name for S&R":"FluxGuidance"},"widgets_values":[4],"color":"#233","bgcolor":"#355"},{"id":28,"type":"Note","pos":[48,576],"size":[336,288],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["If you get an error in any of the nodes above make sure the files are in the correct directories.\n\nSee the top of the examples page for the links : https://comfyanonymous.github.io/ComfyUI_examples/flux/\n\nflux1-dev.safetensors goes in: ComfyUI/models/unet/\n\nt5xxl_fp16.safetensors and clip_l.safetensors go in: ComfyUI/models/clip/\n\nae.safetensors goes in: ComfyUI/models/vae/\n\n\nTip: You can set the weight_dtype above to one of the fp8 types if you have memory issues"],"color":"#432","bgcolor":"#653"},{"id":59,"type":"LoadImage","pos":[60,-300],"size":[315,314],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[{"label":"IMAGE","localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[146,147,148]},{"label":"MASK","localized_name":"遮罩","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.23","Node name for S&R":"LoadImage"},"widgets_values":["WanVideo2_1_00001.png","image",""]},{"id":58,"type":"SaveImage","pos":[1194.912353515625,-170.05279541015625],"size":[985.3012084960938,1060.3828125],"flags":{},"order":26,"mode":0,"inputs":[{"label":"images","localized_name":"图片","name":"images","type":"IMAGE","link":145}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.23","Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI",""]},{"id":50,"type":"Florence2Run","pos":[-444.982177734375,490.11492919921875],"size":[400,364],"flags":{},"order":15,"mode":0,"inputs":[{"label":"image","localized_name":"image","name":"image","type":"IMAGE","link":148},{"label":"florence2_model","localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","link":149}],"outputs":[{"label":"image","localized_name":"image","name":"image","type":"IMAGE","slot_index":0,"links":[]},{"label":"mask","localized_name":"mask","name":"mask","type":"MASK","slot_index":1,"links":[]},{"label":"caption","localized_name":"caption","name":"caption","type":"STRING","slot_index":2,"links":[131,132]},{"label":"data","localized_name":"data","name":"data","type":"JSON","slot_index":3,"links":[]}],"properties":{"cnr_id":"comfyui-florence2","ver":"1.0.3","Node name for S&R":"Florence2Run"},"widgets_values":["","prompt_gen_mixed_caption_plus",true,true,1024,3,true,"",12092664080798,"randomize"]},{"id":49,"type":"Florence2ModelLoader","pos":[-882.915771484375,366.73614501953125],"size":[315,106],"flags":{},"order":10,"mode":2,"inputs":[{"label":"lora","localized_name":"lora","name":"lora","shape":7,"type":"PEFTLORA","link":null}],"outputs":[{"label":"florence2_model","localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","slot_index":0,"links":[]}],"properties":{"cnr_id":"comfyui-florence2","ver":"1.0.3","Node name for S&R":"Florence2ModelLoader"},"widgets_values":["Florence-2-base-PromptGen-v1.5","fp16","sdpa"]},{"id":51,"type":"Display Any (rgthree)","pos":[419.6331481933594,456.38531494140625],"size":[407.91302490234375,138.31002807617188],"flags":{},"order":19,"mode":0,"inputs":[{"dir":3,"label":"source","localized_name":"source","name":"source","type":"*","link":132}],"outputs":[],"title":"展示提示词","properties":{"cnr_id":"rgthree-comfy","ver":"1.0.0","Node name for S&R":"Display Any (rgthree)"},"widgets_values":["a digital illustration in an anime style, featuring a young woman with long, flowing white hair and a slender, athletic physique, she has fair skin and a gentle, almost ethereal expression, her hair is smooth and slightly tousled, with a few strands framing her face, she is dressed in a simple, brown, short-sleeved kimono-style garment that is slightly wrinkled, giving it a casual, relaxed appearance, her left hand is holding a large, metallic sword with a red handle and a red sheath, the sword is held in her right hand, with the tip pointing towards the sky, the background is a gradient of dark and light blue hues, suggesting an outdoor setting, the sky is filled with fluffy clouds, and the sun is casting a warm glow over the scene, casting a soft glow on her skin, the overall mood of the illustration is serene and slightly melancholic, enhanced by the soft, diffused light emanating from the left side of the image, the texture of her clothing and the smoothness of the sword, the image conveys a sense of calm and introspection, typical of high-quality digital art\n\n1girl, solo, long hair, breasts, looking at viewer, bangs, simple background, shirt, holding, closed mouth, short sleeves, standing, weapon, cowboy shot, sky, day, cloud, bracelet, orange shirt, sideboob, holding weapon, colored sclera, holding sword, obi<pad><pad><pad><pad><pad><pad>"]},{"id":60,"type":"DownloadAndLoadFlorence2Model","pos":[-404.4587097167969,316.0794982910156],"size":[365.4000244140625,106],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"lora","name":"lora","shape":7,"type":"PEFTLORA","link":null}],"outputs":[{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","links":[149]}],"properties":{"cnr_id":"comfyui-florence2","ver":"1.0.3","Node name for S&R":"DownloadAndLoadFlorence2Model"},"widgets_values":["MiaoshouAI/Florence-2-base-PromptGen-v1.5","fp16","sdpa"]},{"id":42,"type":"StyleModelLoader","pos":[416.5641784667969,-82.61467742919922],"size":[340,60],"flags":{},"order":12,"mode":0,"inputs":[],"outputs":[{"label":"STYLE_MODEL","localized_name":"风格模型","name":"STYLE_MODEL","type":"STYLE_MODEL","links":[119]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.23","Node name for S&R":"StyleModelLoader"},"widgets_values":["flux1-redux-dev.safetensors"]},{"id":39,"type":"CLIPVisionEncode","pos":[439.039306640625,-271.441162109375],"size":[290,78],"flags":{},"order":13,"mode":0,"inputs":[{"label":"clip_vision","localized_name":"clip视觉","name":"clip_vision","type":"CLIP_VISION","link":117},{"label":"image","localized_name":"图像","name":"image","type":"IMAGE","link":146}],"outputs":[{"label":"CLIP_VISION_OUTPUT","localized_name":"CLIP视觉输出","name":"CLIP_VISION_OUTPUT","type":"CLIP_VISION_OUTPUT","slot_index":0,"links":[120]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.23","Node name for S&R":"CLIPVisionEncode"},"widgets_values":["center"]},{"id":41,"type":"StyleModelApply","pos":[760,-300],"size":[320,122],"flags":{},"order":22,"mode":0,"inputs":[{"label":"conditioning","localized_name":"条件","name":"conditioning","type":"CONDITIONING","link":122},{"label":"style_model","localized_name":"风格模型","name":"style_model","type":"STYLE_MODEL","link":119},{"label":"clip_vision_output","localized_name":"clip视觉输出","name":"clip_vision_output","shape":7,"type":"CLIP_VISION_OUTPUT","link":120}],"outputs":[{"label":"CONDITIONING","localized_name":"条件","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[123]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.23","Node name for S&R":"StyleModelApply"},"widgets_values":[1.5000000000000004,"multiply"]}],"links":[[10,11,0,6,0,"CLIP"],[12,10,0,8,1,"VAE"],[19,16,0,13,2,"SAMPLER"],[20,17,0,13,3,"SIGMAS"],[24,13,0,8,0,"LATENT"],[30,22,0,13,1,"GUIDER"],[37,25,0,13,0,"NOISE"],[41,6,0,26,0,"CONDITIONING"],[54,30,0,22,0,"MODEL"],[55,30,0,17,0,"MODEL"],[56,12,0,30,0,"MODEL"],[116,27,0,13,4,"LATENT"],[117,38,0,39,0,"CLIP_VISION"],[119,42,0,41,1,"STYLE_MODEL"],[120,39,0,41,2,"CLIP_VISION_OUTPUT"],[122,26,0,41,0,"CONDITIONING"],[123,41,0,22,1,"CONDITIONING"],[125,44,0,27,0,"INT"],[126,44,1,27,1,"INT"],[127,44,0,30,1,"INT"],[128,44,1,30,2,"INT"],[131,50,2,6,1,"STRING"],[132,50,2,51,0,"*"],[145,8,0,58,0,"IMAGE"],[146,59,0,39,1,"IMAGE"],[147,59,0,44,0,"IMAGE"],[148,59,0,50,0,"IMAGE"],[149,60,0,50,1,"FL2MODEL"]],"groups":[{"id":1,"title":"Redux Model","bounding":[50,-483.6000061035156,1040,507.6000061035156],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":1.1671841070450022,"offset":[326.0412969274997,-282.3530201640515]},"groupNodes":{},"ue_links":[]},"version":0.4}